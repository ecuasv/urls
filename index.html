<!DOCTYPE html>
<html>
<head>
    <title>JavaScript Error Detector</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: #fff;
            padding: 20px;
        }
        .error-box {
            background: #2a2a2a;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #f44336;
        }
        .success-box {
            background: #2a2a2a;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #4caf50;
        }
        .code-block {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 10px 0;
        }
        button {
            background: #4ecdc4;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #45b7aa;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            background: #333;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>üîç JavaScript Error Detector</h1>
    
    <div class="test-section">
        <h3>1. Script Tag Detection</h3>
        <div id="script-check">Checking for script tags...</div>
    </div>
    
    <div class="test-section">
        <h3>2. Class Definition Test</h3>
        <div id="class-check">Checking if YouTubeIDFinder is defined...</div>
    </div>
    
    <div class="test-section">
        <h3>3. Manual Class Loading Test</h3>
        <button onclick="testManualLoad()">Test Manual Load</button>
        <div id="manual-load-result"></div>
    </div>
    
    <div class="test-section">
        <h3>4. JavaScript Syntax Validator</h3>
        <button onclick="validateSyntax()">Validate Your JS Code</button>
        <div id="syntax-result"></div>
    </div>
    
    <div class="test-section">
        <h3>5. All JavaScript Errors</h3>
        <div id="all-errors">No errors detected yet</div>
    </div>

    <script>
        // Capture all JavaScript errors
        const allErrors = [];
        
        window.addEventListener('error', function(e) {
            allErrors.push({
                type: 'Runtime Error',
                message: e.message,
                filename: e.filename,
                line: e.lineno,
                column: e.colno,
                stack: e.error ? e.error.stack : 'No stack trace'
            });
            updateAllErrors();
        });
        
        window.addEventListener('unhandledrejection', function(e) {
            allErrors.push({
                type: 'Unhandled Promise Rejection',
                message: e.reason,
                stack: e.reason && e.reason.stack ? e.reason.stack : 'No stack trace'
            });
            updateAllErrors();
        });
        
        function updateAllErrors() {
            const errorsDiv = document.getElementById('all-errors');
            if (allErrors.length === 0) {
                errorsDiv.innerHTML = 'No errors detected yet';
                return;
            }
            
            errorsDiv.innerHTML = allErrors.map(error => `
                <div class="error-box">
                    <strong>${error.type}:</strong> ${error.message}<br>
                    ${error.filename ? `File: ${error.filename}:${error.line}:${error.column}<br>` : ''}
                    <div class="code-block">${error.stack}</div>
                </div>
            `).join('');
        }
        
        function checkScriptTags() {
            const scriptDiv = document.getElementById('script-check');
            const scripts = document.querySelectorAll('script[src]');
            
            let html = `<div class="success-box">Found ${scripts.length} external script tags:</div>`;
            
            scripts.forEach((script, index) => {
                const src = script.src;
                const isLoaded = script.readyState === 'loaded' || script.readyState === 'complete';
                
                html += `
                    <div class="code-block">
                        Script ${index + 1}: ${src}<br>
                        Status: ${isLoaded ? 'Loaded' : 'Loading/Unknown'}
                    </div>
                `;
            });
            
            if (scripts.length === 0) {
                html = `<div class="error-box">No external script tags found! This might be why YouTubeIDFinder is not defined.</div>`;
            }
            
            scriptDiv.innerHTML = html;
        }
        
        function checkClassDefinition() {
            const classDiv = document.getElementById('class-check');
            
            if (typeof YouTubeIDFinder !== 'undefined') {
                classDiv.innerHTML = `
                    <div class="success-box">
                        ‚úÖ YouTubeIDFinder class is defined!<br>
                        Type: ${typeof YouTubeIDFinder}
                    </div>
                `;
            } else {
                classDiv.innerHTML = `
                    <div class="error-box">
                        ‚ùå YouTubeIDFinder class is NOT defined!<br>
                        This means either:<br>
                        1. Your JavaScript file isn't loading<br>
                        2. There's a syntax error preventing the class from being defined<br>
                        3. The class is defined in a different scope
                    </div>
                `;
            }
        }
        
        function testManualLoad() {
            const resultDiv = document.getElementById('manual-load-result');
            resultDiv.innerHTML = 'Testing manual load...';
            
            // Try to define a minimal version of the class
            try {
                if (typeof YouTubeIDFinder === 'undefined') {
                    // Create a minimal test class
                    window.YouTubeIDFinder = class {
                        constructor() {
                            console.log('Test YouTubeIDFinder created');
                        }
                    };
                    
                    const testInstance = new YouTubeIDFinder();
                    resultDiv.innerHTML = `
                        <div class="success-box">
                            ‚úÖ Successfully created test YouTubeIDFinder class!<br>
                            This proves the issue is with your original script loading.
                        </div>
                    `;
                } else {
                    const testInstance = new YouTubeIDFinder();
                    resultDiv.innerHTML = `
                        <div class="success-box">
                            ‚úÖ YouTubeIDFinder class works! The issue might be elsewhere.
                        </div>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="error-box">
                        ‚ùå Error creating YouTubeIDFinder: ${error.message}<br>
                        <div class="code-block">${error.stack}</div>
                    </div>
                `;
            }
        }
        
        function validateSyntax() {
            const resultDiv = document.getElementById('syntax-result');
            resultDiv.innerHTML = `
                <div class="code-block">
                    To validate your JavaScript syntax:
                    <br><br>
                    1. Copy your entire JavaScript code
                    <br>
                    2. Paste it into: <a href="https://jshint.com/" target="_blank">JSHint.com</a>
                    <br>
                    3. Or use browser DevTools: F12 ‚Üí Console ‚Üí Paste code
                    <br><br>
                    Common syntax errors that prevent class definition:
                    <br>‚Ä¢ Missing closing braces }
                    <br>‚Ä¢ Missing semicolons in strict mode
                    <br>‚Ä¢ Unclosed strings or comments
                    <br>‚Ä¢ Invalid characters (smart quotes, etc.)
                </div>
            `;
        }
        
        // Run initial checks
        document.addEventListener('DOMContentLoaded', function() {
            checkScriptTags();
            checkClassDefinition();
            
            // Check again after a delay in case scripts are still loading
            setTimeout(() => {
                checkClassDefinition();
            }, 2000);
        });
    </script>
</body>
</html>
